<!-- 검색 시 화면 -->
<!-- 화면 구성 -->
 <!--상단부 -->
   <!-- 
     - 홈 화면 이랑 동일한 상단 부
   -->

 <!--중단부 -->
    <!-- 
        - 중단부는 검색 결과를 보여주는 영역입니다.
        - 검색 결과는 사용자가 입력한 검색어에 해당하는 뉴스 기사를 보여줍니다.
        - 검색 결과가 없다면 "검색 결과가 없습니다."라는 메시지를 표시합니다.
        - 검색 결과는 최신순으로 정렬되어 있으며, 각 기사는 제목, 요약, 작성자, 작성일 등의 정보를 포함합니다.
        - 게시물은 페이지네이션으로 나누어져 있으며, 사용자는 페이지를 이동하여 더 많은 결과를 볼 수 있습니다
        - 검색어 입력란과 검색 버튼이 포함되어 있습니다.
        - 검색 결과는 뉴스 기사 목록으로 구성되며, 각 기사는 제목, 요약, 작성자, 작성일 등의 정보를 포함합니다.
 
    -->
 <!--하단부 -->
    <!-- 
        - 하단부는 뉴스 사이트의 정보, 이용약관, 개인정보처리방침 등으로 구성됩니다.
        - 뉴스 사이트의 정보는 회사 소개, 연락처 등을 포함합니다.
        - 이용약관과 개인정보처리방침은 사용자가 사이트를 이용하는 데 필요한 정보를 제공합니다.
    -->

<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>검색 결과 데모</title>
  <style>
    body { font-family: 'Noto Sans KR', sans-serif; margin:0; padding:0; background:#f5f5f5; }
    .container { max-width:800px; margin:40px auto; padding:0 16px; }
    header, footer { text-align:center; margin-bottom:24px; }
    h2 { font-size:1.2rem; margin-bottom:16px; }
    /* 로딩 스피너 */
    .spinner {
      width:40px; height:40px;
      border:4px solid #ddd;
      border-top-color:#3498db;
      border-radius:50%;
      animation: spin 1s linear infinite;
      margin:60px auto;
    }
    @keyframes spin { to { transform: rotate(360deg); } }
    /* 결과 리스트 */
    .results-list { list-style:none; margin:0; padding:0; }
    .result-item {
      background:#fff; margin-bottom:12px; padding:16px; border-radius:6px;
      opacity:0; transform: translateY(20px);
      animation: fadeInUp 0.5s forwards ease-out;
    }
    .result-item:nth-child(1){ animation-delay:0.2s; }
    .result-item:nth-child(2){ animation-delay:0.4s; }
    .result-item:nth-child(3){ animation-delay:0.6s; }
    @keyframes fadeInUp {
      to { opacity:1; transform: translateY(0); }
    }
    .result-title { font-size:1rem; margin:0 0 6px; }
    .result-summary { font-size:0.9rem; margin:0 0 8px; color:#555; }
    .result-meta { font-size:0.8rem; color:#888; }
    /* 페이지네이션 */
    .pagination { text-align:center; margin-top:24px; }
    .pagination a {
      display:inline-block; margin:0 4px; padding:6px 10px; text-decoration:none;
      border:1px solid #ccc; border-radius:4px; color:#333;
    }
    .pagination a.active { background:#3498db; color:#fff; border-color:#3498db; }
  </style>
</head>
<body>

  <div class="container">

    <header>
      <h2>“<span id="kw"></span>” 검색결과</h2>
      <!-- 스피너 -->
      <div id="loader" class="spinner"></div>
    </header>

    <!-- 결과가 채워질 곳 -->
    <ul id="results" class="results-list"></ul>

    <!-- 페이지네이션 (예시) -->
    <nav class="pagination" id="pager"></nav>

  </div>

  <script>
    // 1) URL에서 ?q=키워드를 읽어오기
    const params = new URLSearchParams(location.search);
    const kw = params.get('q') || '테크';
    document.getElementById('kw').textContent = kw;

    // 2) 예시 데이터를 “페치”하는 함수 (setTimeout으로 지연)
    function fetchResults(keyword) {
      return new Promise(resolve => {
        setTimeout(() => {
          resolve([
            { id:101, title:`${keyword} 뉴스 제목 A`, summary:`A 요약문 예시입니다.`, author:'홍길동', date:'2025-06-24' },
            { id:102, title:`${keyword} 뉴스 제목 B`, summary:`B 요약문 예시입니다.`, author:'김철수', date:'2025-06-23' },
            { id:103, title:`${keyword} 뉴스 제목 C`, summary:`C 요약문 예시입니다.`, author:'이영희', date:'2025-06-22' },
          ]);
        }, 1200);
      });
    }

    // 3) 화면 업데이트
    async function render() {
      const loader = document.getElementById('loader');
      const list = document.getElementById('results');
      const pager = document.getElementById('pager');

      try {
        // 로딩 스피너 표시
        loader.style.display = 'block';
        // 실제 API라면: const data = await fetch(`/api/search?keyword=${kw}`).then(r=>r.json());
        const data = await fetchResults(kw);

        // 스피너 감추기
        loader.style.display = 'none';

        if (data.length === 0) {
          list.innerHTML = `<p style="text-align:center;color:#777">검색 결과가 없습니다.</p>`;
          return;
        }

        // 결과 아이템 그리기
        list.innerHTML = data.map(item => `
          <li class="result-item">
            <h3 class="result-title">
              <a href="/post.html?id=${item.id}">${item.title}</a>
            </h3>
            <p class="result-summary">${item.summary}</p>
            <div class="result-meta">작성자: ${item.author} • ${item.date}</div>
          </li>
        `).join('');

        // 간단 페이지네이션 예시
        pager.innerHTML = `
          <a href="?q=${kw}&page=1">1</a>
          <a href="?q=${kw}&page=2" class="active">2</a>
          <a href="?q=${kw}&page=3">3</a>
        `;
      } catch (e) {
        console.error(e);
        loader.style.display = 'none';
        list.innerHTML = `<p style="text-align:center;color:red">오류가 발생했습니다.</p>`;
      }
    }

    // 4) 실행
    render();
  </script>

</body>
</html>

